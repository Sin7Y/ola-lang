
contract U32BasicTest {

    

    // BEGIN-CHECK: define void @testU32DeclareUninitialized() 
    fn testU32DeclareUninitialized() {
        // CHECK: %a = alloca i64, align 8
	    // CHECK: store i64 0, ptr %a, align 4
         u32 a = 1; 
         print(a);
    }

    // BEGIN-CHECK: define void @testU32DeclareUninitialized()
    fn testU32DeclareInitialized() { 
        // CHECK: %a = alloca i64, align 8
	    // CHECK: store i64 5, ptr %a, align 4
        u32 a = 5;
        print(a);
    }

    // BEGIN-CHECK: define void @testU32DeclareThenInitialized()
    fn testU32DeclareThenInitialized() {
        // CHECK: %a = alloca i64, align 8
        // CHECK: store i64 0, ptr %a, align 4
        // CHECK: store i64 5, ptr %a, align 4
        u32 a;
        a = 5;
        print(a);
    }

    // BEGIN-CHECK: define void @testU32InitializedByOther()
    fn testU32InitializedByOther() {
        // CHECK: %b = alloca i64, align 8
        // CHECK: %a = alloca i64, align 8
        // CHECK: store i64 5, ptr %a, align 4
        // CHECK: %0 = load i64, ptr %a, align 4
        // CHECK: store i64 %0, ptr %b, align 4
        u32 a = 5;
        u32 b = a;
        print(b);
    }

    // BEGIN-CHECK: define void @testU32LeftValueExpression()
    fn testU32LeftValueExpression() {
        // CHECK: %a = alloca i64, align 8
        // CHECK: store i64 5, ptr %a, align 4
        // CHECK: %0 = load i64, ptr %a, align 4
        // CHECK: store i64 %0, ptr %a, align 4
        u32 a = 5;
        a = a;
        print(a);
    }   

    // BEGIN-CHECK: define void @testU32RightValueExpression()
    fn testU32RightValueExpression() {
        // CHECK: %b = alloca i64, align 8
        // CHECK: %a = alloca i64, align 8
        // CHECK: store i64 5, ptr %a, align 4
        // CHECK: %0 = load i64, ptr %a, align 4
        // CHECK: %1 = load i64, ptr %a, align 4
        // CHECK: %2 = add i64 %0, %1
        // CHECK: store i64 %2, ptr %b, align 4
        u32 a = 5;
        u32 b = a + a;
        print(b);
    }

    // BEGIN-CHECK: define void @testU32AsParameter(i64 %0)
    fn testU32AsParameter(u32 x) {
        // CHECK: %x = alloca i64, align 8
        // CHECK: store i64 %0, ptr %x, align 4
        print(x);
    }

    // BEGIN-CHECK: define void @testU32CallByValue()
    fn testU32CallByValue() {
        // CHECK: %a = alloca i64, align 8
        // CHECK: store i64 5, ptr %a, align 4
        u32 a = 5;
        // CHECK: %0 = load i64, ptr %a, align 4
        // CHECK: call void @testU32AsParameter(i64 %0)
        testU32AsParameter(a);
    }

    // BEGIN-CHECK: define i64 @testU32AsReturnValue()
    fn testU32AsReturnValue() -> (u32) {
        // CHECK: %a = alloca i64, align 8
        // CHECK: store i64 10, ptr %a, align 4
        // CHECK: %0 = load i64, ptr %a, align 4
        // CHECK: ret i64 %0
        u32 a = 10;
        return a;
    }

    // BEGIN-CHECK: define i64 @testU32AsReturnConstValue()
    fn testU32AsReturnConstValue() -> (u32) {
        // CHECK: ret i64 5
        return 5;
    }

    fn testU32AddOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a + b;
        print(c);
    }

    fn testU32AddAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a += b;
        print(a);
    }

    fn testU32SubOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a - b;
        print(c);
    }

    fn testU32SubAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a -= b;
        print(a);
    }

    fn testU32MulOperatoin() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a * b;
        print(c);
    }

    fn testU32MulAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a *= b;
        print(a);
    }

    fn testU32DivOperation() {
        u32 a = 10;
        u32 b = 5;
        u32 c = a / b;
        print(c);
    }

    fn testU32DivAssignOperation() {
        u32 a = 10;
        u32 b = 5;
        a /= b;
        print(a);
    }

    fn testU32ModOperation() {
        u32 a = 10;
        u32 b = 5;
        u32 c = a % b;
        print(c);
    }

    fn testU32ModAssignOperation() {
        u32 a = 10;
        u32 b = 5;
        a %= b;
        print(a);
    }

    fn testU32BitWiseXorOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a ^ b;
        print(c);
    }

    fn testU32BitWiseXorAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a ^= b;
        print(a);
    }

    fn testU32AndOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a & b;
        print(c);
    }

    fn testU32AndAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a &= b;
        print(a);
    }

    fn testU32BitWiseOrOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a | b;
        print(c);
    }

    fn testU32BitWiseOrAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a |= b;
        print(a);
    }

    fn testU32PowerOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a ** b;
        print(c);
    }

    fn testU32LeftShiftOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a << b;
        print(c);
    }

    fn testU32LeftShiftAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a <<= b;
        print(a);
    }

    fn testU32RightShiftOperation() {
        u32 a = 5;
        u32 b = 10;
        u32 c = a >> b;
        print(c);
    }

    fn testU32RightShiftAssignOperation() {
        u32 a = 5;
        u32 b = 10;
        a >>= b;
        print(a);
    }

    fn testU32EqualOperation() {
        u32 a = 5;
        u32 b = 10;
        bool c = a == b;
        print(c);
    }

    fn testU32NotEqualOperation() {
        u32 a = 5;
        u32 b = 10;
        bool c = a != b;
        print(c);
    }

    fn testU32GreaterOperation() {
        u32 a = 5;
        u32 b = 10;
        bool c = a > b;
        print(c);
    }

    fn testU32GreaterEqualOperation() {
        u32 a = 5;
        u32 b = 10;
        bool c = a >= b;
        print(c);
    }

    fn testU32LessOperation() {
        u32 a = 5;
        u32 b = 10;
        bool c = a < b;
        print(c);
    }

    fn testU32LessEqualOperation() {
        u32 a = 5;
        u32 b = 10;
        bool c = a <= b;
        print(c);
    }


    fn testU32BitWiseNotOperation() {
        u32 a = 5;
        u32 c = ~a;
        print(c);
    }

    fn testU32IncrementOperation() {
        u32 a = 5;
        a++;
        print(a);
    }

    fn testU32DecrementOperation() {
        u32 a = 5;
        a--;
        print(a);
    }

    fn testU32AddOverflow() {
        u32 a = 4294967295;
        u32 b = 1;
        u32 c = a + b;
        print(c);
    }

    fn testU32SubOverflow() {
        u32 a = 0;
        u32 b = 1;
        u32 c = a - b;
        print(c);
    }

    fn testU32LocalScope() {
        {
            u32 a = 15;
            print(a);
        }
        // a not found
        //print(a);
        u32 a = 10;
        print(a);
    }

    fn testU32IfStatement() {
        u32 a = 10;
        if (a > 5) {
            print(a);
        } else {
            print(0);
        }
    }

    fn testU32InLoopStatement() {
        for (u32 i = 0; i < 10; i++) {
            u32 a = i;
            print(a);
        }
    }

}
